<script src="test.js"></script>
<script type="text/javascript">

// ----------------------- zamikani ----------------------------------

	// var foo = (function(){
	// 	var count = 0;
	// 	return function(num){
	// 		num !== 'undefined' && typeof(num) === 'number' ? count = num : count++;
	// 		return count;
			
	// 	}
	// }())
	// console.log(foo())
	// console.log(foo())
	// console.log(foo(0))
	// console.log(foo())
	// console.log(foo())
	// console.log(foo(15))
	// console.log(foo())
	// console.log(foo())
	// console.log(foo())
	// console.log(foo())

//---------------------- clouser ------ hetn el zamikani -----------------------

	// const foo = () => {
	// 	let count = 0;
	// 	return (num) => {
	// 		if (typeof(num) !== 'undefined') {
	// 			count += num;
	// 			return count;
	// 		}
	// 		return count;
	// 	}
	// }
	// const res = foo();

	// res(2)
	// res(14)
	// res(6)
	// res(8)
	// res(2)
	// console.log(res())

	// const foo1 = () => {
	// 	let togl = true;
	// 	return () => {
	// 		return togl = !togl;
	// 	}
	// }

	// const togler = foo1();
	// console.log(togler())
	// console.log(togler())
	// console.log(togler())
	// console.log(togler())
	// console.log(togler())

// ---------------- arguments --------------------------
	// let foo2 = (...es6Args) => {
	// 	console.log(es6Args[0])
	// 	console.log(es6Args) // es6 ov normal array e stanum
	// }
	// foo2("ES6", 6, "k", 8, "h", "DFG", "wkl")

	// function foo3() {
	// 	console.log(arguments[0]);
	// 	console.log(arguments);
	// 	console.log([].slice.call(arguments))//sarkum e normal array
	// }

	// foo3(3, "df", 156, 2, 58, "r", "F")

	// var foo4 = function() {
	// 	console.log(arguments[0]);
	// 	console.log(arguments);
	// 	console.log([].slice.call(arguments)) // sarkum e normal array
	// }
	// foo4("t", "B", "456", 25, 58, "r", "F")

// ---------------------- Object  prototype ----------------
	// const kendani = (name, arag) => {   es6 arrow function: kendani is not a constructor miat kartal
	// 	this.arag = arag || 0;
	// 	this.name = name || '';
	// }
	// const animl = new kendani("vagr", 23)
	// console.log(animl.name + " ***** " + animl.arag)

	// var kendani = function(name, arag){
	// 	this.arag = arag || 0;
	// 	this.name = name || '';
	// 	this. = name || '';
	// }
	// var animl = new kendani("vagr", 23)
	// console.log(animl.name + " ***** " + animl.arag)

	// var kendani = function(name){
	// 	this.name = name;
	// }
	// kendani.prototype.arag = 45
	// var animl = new kendani("vagr")
	// console.log(animl.name + " ***************** " + animl.arag)



	// var f = (function(){
	// 	var count = 10;
	// 	return function(num){
	// 		num !== undefined ? count = num : count+=10 
	// 		return count;
	// 	}
	// }())

	// console.log(f())
	// console.log(f())
	// console.log(f())
	// console.log(f(55))
	// console.log(f())
	// console.log(f())

	// var plus = function(){
	// 	var res = 0;
	// 	return function(num) {
	// 		num !== undefined ? res += num : ''
	// 		return res
	// 	}
	// }

	// var mplus = plus()
	// console.log(mplus(5))
	// console.log(mplus(10))
	// console.log(mplus(20))
	// console.log(mplus(55))
	// console.log(mplus(30))
	// console.log(mplus(50))

	// const plus = () => {
	// 	let counter = 0;
	// 	return (num) => {
	// 		if(typeof(num) !== 'undefined'){
	// 			counter += num;
	// 			return null;
	// 		}
	// 		return counter;
	// 	}
	// }

	// const mPlus = plus()
	// console.log(mPlus(2))
	// console.log(mPlus(3))
	// console.log(mPlus(-4))
	// console.log(mPlus(5))
	// console.log(mPlus(15))
	// console.log(mPlus())

    // var foo = function (name) {
    //     this.name = name
    // }
    //
    // foo.prototype.arg = 45
    //
    // var mard = new foo('mard111')
    //
    // console.log(mard.name, '************', mard.arg )



    // let azgutyun1 = {
    //     azg(param){
    //         console.log("azgutyun@ " + param)
    //     }
    // }
    //
    // let azgutyun2 = {
    //     __proto__: azgutyun1,
    //     azg(param){
    //         super.azg(param)
    //     }
    //
    // }
    //
    // let azgutyun = azgutyun2.azg
    // azgutyun('hay')


//     const fio = (name) => {
//         let anun = name
//         const foo = (param) => {
//             if (typeof param !== "undefined") {
//                 anun = anun + ' ' + param
//                 return foo
//             }else {
//                 return anun
//             }
//
//         }
//         return foo
//     }
// console.log(fio("anun")("azganun")("hayranun")())

    // const a =  [0, 1, 2, 3, 4].reduce(function(previousValue, currentValue, index, array) {
    //     console.log("previousValue: ", previousValue)
    //     console.log("currentValue: ", currentValue)
    //     console.log("index: ", index)
    //     console.log("array: ", array)
    //     console.log("previousValue: ", previousValue)
    //      return previousValue + currentValue;
    // }, 33);// 33 = initialValue Необязательный
    //
    // console.log



    // var fullname = 'John Doe';
    // var obj = {
    //    fullname: 'Colin Ihrig',
    //    prop: {
    //       fullname: 'Aurelio De Rosa',
    //       getFullname: function() {
    //          return this.fullname;
    //       }
    //    }
    // };
    //
    // console.log(obj.prop.getFullname());
    //
    // var test = obj.prop.getFullname;
    //
    // console.log(test());
    //
    // console.log(test.call(obj.prop));

    //----------------------------https://habr.com/ru/post/351874/------------------

    // var str = "dgdsfgdshgsdh"
    // str[0] = 'w'// sa chi ashxti
    // console.log(str[0])
    //
    // Number.prototype.plus = function (num) {
    //     console.log(this)
    //     return this + num
    // }
    // Number.prototype.minus = function (num) {
    //     return this - num
    // }
    //
    // console.log((10).plus(6).minus(-21))
    
    // function f() {
    //     console.log(arguments)
    //     var arr = [].slice.call(arguments, 1).join(arguments[0])
    //     console.log(arr)
    // }
    //
    // console.log(f('*', '1', 'b', '1c'))

    // console.log(1);
    // setTimeout(function() {
    //     console.log(2);
    // }, 0)
    // console.log(3);


//------------------- https://habr.com/ru/post/127482/ -- hosting ----------------
//     var foo = 1;
//     function bar() {
//         console.log(foo)
//         if (!foo) {
//             var foo = 10;
//         }
//         console.log(foo);
//     }
//     bar();

    // var a = 1;
    // function b() {
    //     a = 10;
    //     return;
    //     function a() {}
    // }
    // b();
    // console.log(a);

    // var x = 1;
    // console.log(x); // 1
    // if (true) {
    //     var x = 2;
    //     console.log(x); // 2
    // }
    // console.log(x); // 2



    // function myPromise()
    // {
    //     return new Promise(function(resolve, reject)
    //     {
    //         //псевдо асинхронный код
    //         var ascync = true; //или  false
    //         if (!ascync)
    //              reject(new Error("не удалось выполнить..."));
    //
    //         resolve(1);
    //     });
    // }
    //
    // myPromise()
    //     .then(function(res)
    //     {
    //         console.log(res); //выведет 1
    //     })
    //     .catch(function(err){
    //         console.log(err.message); //выведет сообщение "не удалось выполнить..."
    //     });
    //
    // async function foo() {
    //     const res = await myPromise()
    //     console.log(res)
    // }
    //
    // foo()

    // function delay(interval) {
    //     return new Promise(function(resolve) {
    //         setTimeout(resolve, interval);
    //     });
    // }
    //
    // delay(1000)
    //     .then(function() {
    //         console.log('1 second elapsed');
    //         return delay(1000);
    //     })
    //     .then(function() {
    //         console.log('2 seconds elapsed');
    //         return delay(1000);
    //     })
    //     .then(function() {
    //         console.log('3 seconds elapsed');
    //         return delay(1000);
    //     })
    //     .then(function() {
    //         console.log('4 seconds elapsed');
    //     });


    //-------------- promise all ----------------------

    // var api1 = fetch('https://jsonplaceholder.typicode.com/todos/1').then(function(response){
//     return response.json()
// });
// var api2 = fetch('https://jsonplaceholder.typicode.com/posts/1').then(function(response){
//     return response.json()
// });
// var api3 = fetch('https://jsonplaceholder.typicode.com/users/1').then(function(response){
//     return response.json()
// });
//
// var allData = {"api1": {}, "api2": {}, "api3": {}}
//
// Promise.all([api1, api2, api3 ]).then(function (res) {
//     allData["api1"] = res[0]
//     allData["api2"] = res[1]
//     allData["api3"] = res[2]
//     console.log(res[0])
//     console.log(res[1])
//     console.log(res[2])
//     return allData
// }).then(function (data) {
//     console.log(data)
// }).catch(function (err) {
//     console.log(err)
// })
//
// Promise.race([api1, api2, api3 ]).then(function (res) {
//     console.log("race:::::::::::::::", res)
//     return allData
// }).catch(function (err) {
//     console.log(err)
// })

    // var promise1 = new Promise(function (resolve,reject) {
    //     setTimeout(resolve, 1700, 'promise1');
    // })
    //
    // var promise2 = new Promise(function (resolve,reject) {
    //     setTimeout(resolve, 4000, 'promise2');
    // })
    //
    // var promise3 = new Promise(function (resolve,reject) {
    //     setTimeout(resolve, 1500, 'promise3');
    // })
    //
    // Promise.race([promise1, promise2, promise3])
    //     .then(function (res) {
    //         console.log(res)
    //     })
    //
    // Promise.all([promise1, promise2, promise3])
    //     .then(function (res) {
    //         console.log(res[0])
    //         console.log(res[1])
    //         console.log(res[2])
    //     })

    // async function todos (id) {
    //     return fetch(`https://jsonplaceholder.typicode.com/todos/${id}`).then(function (res) {
    //         return res.json();
    //     });
    // }
    // async function users (id) {
    //     return fetch(`https://jsonplaceholder.typicode.com/users/${id}`).then(function (res) {
    //         return res.json();
    //     })
    // }
    // async function posts (id) {
    //     return fetch(`https://jsonplaceholder.typicode.com/posts/${id}`).then(function (res) {
    //         return res.json();
    //     })
    // }
    //
    // async function foo(id=1) {
    //     var todo = await todos(id);
    //     var user = await users(todo.userId);
    //     var post = await posts(user.id);
    //     console.log(todo)
    //     console.log(user)
    //     console.log(post)
    // }
    //
    // foo(15);
    //
    // async function getUserNameByPostID(id) {
    //     var postRespons = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`)
    //     var post = await postRespons.json();
    //     var userRespons = await fetch(`https://jsonplaceholder.typicode.com/users/${post.userId}`)
    //     var user = await userRespons.json()
    //     return user.name
    // }
    //
    // getUserNameByPostID(26).then(res=>{
    //     console.log(res)
    // })

    // async function f() {
    //     return new Promise(resolve => setTimeout(resolve, 1000, "step"))
    // }
    //
    // async function f1() {
    //     return new Promise(resolve => setTimeout(resolve, 2000, "step1"))
    // }
    //
    // async function f2() {
    //     return new  Promise(resolve => setTimeout(resolve, 2500, "step2"))
    // }
    //
    // async function results() {
    //     var step = await f()
    //     var step1 = await f1()
    //     var step2 = await f2()
    //     return step+" "+step1+" "+step2;
    // }
    //
    // results().then(res=>console.log(res))
    //
    // async function doManyThings(num) {
    //     return num;
    // }


    // var a = async function(num) {
    //     try {
    //         return await doManyThings(num);
    //     } catch (err) {
    //         console.error("err:::", err);
    //     }
    // };
    // a(15).then(res=>console.log(res))
    //
    // var b = (async function(num) {
    //     try {
    //         return await doManyThings(num);
    //     } catch (err) {
    //         console.error(err);
    //     }
    // })(35);
    // b.then(res=>console.log(res))

    async function getData(id) {
        try {
            const getComments = await fetch(`https://jsonplaceholder.typicode.com/comments/${id}`);
            var comments = await getComments.json();

            if (!comments.postId) {
                throw new Error('error 11111111111111');
            }
        }
        catch (err) {
            console.log("err::::", err)
        }

        try {
            const getPosts = await fetch(`https://jsonplaceholder.typicode.com/posts/${comments.postId}`)
            var posts = await getPosts.json()
            if (!posts.userId) {
                throw new Error('error 22222222222');
            }
        }
        catch (e) {
            console.log(e)
        }

        try {
            const getUsers = await fetch(`https://jsonplaceholder.typicode.com/users/${posts.userId}`)
            var users = await getUsers.json()
        }
        catch (e) {
            console.log(e)
        }

        return users;
    }

    getData(10).then(res=>console.log(res))

</script>